# MarkGT

一个基于Python的Markdown编辑器，提供简洁优雅的写作体验。

## 功能特点

- 实时预览
- 语法高亮
- 主题切换
- 文件自动保存
- 导出多种格式

## 安装要求

- Python 3.8+
- PyQt6
- 其他依赖见requirements.txt

## 安装步骤

1. 克隆仓库
```bash
git clone https://github.com/yourusername/MarkGT.git
cd MarkGT
```

2. 安装依赖
```bash
pip install -r requirements.txt
```

3. 运行程序
```bash
python src/main.py
```

## 开发计划

- [ ] 基础编辑器功能
- [ ] Markdown预览
- [ ] 文件管理
- [ ] 主题系统
- [ ] 导出功能
- [ ] 快捷键支持 


### 修改编辑器类，添加实时预览功能
- 实时预览：在左侧编辑Markdown文本，右侧会实时显示渲染后的效果

### 添加一个菜单栏，包含基本的文件操作功能
- 文件操作：
 - 新建文件
 - 打开文件
 - 保存文件
- 基本的编辑器功能：
 - Markdown语法高亮
 - 自动缩进
 - 等宽字体
 - 可调整的分割视图

### 添加视图功能和自动换行设置
1. 视图功能：
- 添加了一个工具栏，包含"视图"菜单
- 在视图菜单中添加了两个选项：
 - 自动换行：可以切换编辑器的自动换行功能
 - 分割视图：可以切换是否显示预览区域
2. 自动换行功能：
- 默认启用自动换行
- 可以通过视图菜单中的"自动换行"选项来切换
- 使用QsciScintilla.WrapMode.WrapWord实现按单词换行

### 改进了滚动同步算法，主要改进包括：
1. 编辑器到预览的同步：
- 使用firstVisibleLine()获取当前可见的第一行
- 计算相对于总行数的比例
- 根据比例设置预览区域的滚动位置
2. 预览到编辑器的同步：
- 使用预览区域的滚动条值
- 计算相对于总高度的比例
- 根据比例设置编辑器的可见行
3. 保留了边界检查：
- 确保滚动位置不会超出有效范围
- 防止出现负值或超出最大值的情况

现在当您：
- 滚动到编辑器底部时，预览区域也会滚动到底部
- 滚动到预览区域底部时，编辑器也会滚动到底部
- 滚动到中间位置时，两个视图会保持中心对齐

### 添加了以下功能：
1. 添加相应数量的空行：
- 1.1 计算窗口高度的一半对应的行数：
获取字体高度
使用默认窗口高度800像素
计算需要的行数
 -1.2 添加相应数量的空行：
使用\n乘以计算出的行数
这样会添加足够的空行，使底部空间达到窗口高度的一半
2. setScrollWidth(1) 和 setScrollWidthTracking(True)：
设置滚动宽度为1，这样会显示水平滚动条
启用滚动宽度跟踪，确保滚动条正确显示
3. setMarginWidth(2, 0)：
隐藏右侧边距，使界面更整洁

现在可以：【没有成功】
滚动到文档底部后继续向下滚动
在底部空白区域继续编辑
编辑时会自动扩展滚动区域


修改同步滚动的逻辑：
在计算滚动比例时，现在只考虑实际内容（不包括末尾的空行）
使用 text().rstrip().split('\n') 来获取实际内容的行数
在计算目标滚动位置时，使用实际内容行数而不是总行数
这样修改后，当滚动到实际内容的最后一行时，预览区域应该也会滚动到对应的位置。空行区域只会在你继续向下滚动时才会显示。

## 解决问题记录
### 不能够同时打开多个文件 2025.05.19